(function(){"use strict";var e={3690:function(e,t,n){var s=n(9963),o=n(6252);function a(e,t,n,s,a,i){const r=(0,o.up)("NavbarComponent"),l=(0,o.up)("MainComp"),c=(0,o.up)("SimpleUpload");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(r),(0,o.Wm)(l),(0,o.Wm)(c)])}const i=e=>((0,o.dD)("data-v-4d3621ae"),e=e(),(0,o.Cn)(),e),r=i((()=>(0,o._)("h3",null,"Software Engineering Group Project",-1))),l=i((()=>(0,o._)("canvas",null,null,-1))),c=[r,l];function d(e,t,n,s,a,i){return(0,o.wg)(),(0,o.iD)("div",null,c)}var p=n(7327),u=n(4690).xsS,h=n(4690).D4V,g=n(4690).Pa4,m=n(4690).ezm,v=n(4690).YfP,f=n(4690).BtG,b=n(4690).zHn,w=n(4690).lSG,y=n(4690).BBM,k=n(4690).gZI,C=n(4690).n0n,P=document.getElementById("loadFile");P||(P=document.createElement("INPUT"),P.setAttribute("id","loadFile"),P.setAttribute("type","file"),P.style.position="absolute",P.style.top="80px",P.style.width="200px",P.style.height="100px",P.style.right="40px",document.body.children[0].appendChild(P)),n(8776),n(4241),n(8417);class _{constructor(e){(0,p.Z)(this,"scene",void 0),(0,p.Z)(this,"engine",void 0),this.engine=new h(e,!0),this.scene=this.CreateScene();const t=C.ImportMesh("","./models/","item.glb"),n=t.meshes;console.log("meshes",n);const s=new m("hemiLight",new g(0,1,0),this.scene);s.intensity=.5;const o=new v("Camera",-Math.PI/4*3,Math.PI/4,10,new g(0,0,0),this.scene);o.attachControl(!0),this.initXR(),this.engine.runRenderLoop((()=>{this.scene.render()}))}CreateScene(){const e=new u(this.engine);return e}async initXR(){const e=f.CreateFromPrefilteredData("./environment/environment.env",this.scene),t=new k({groundOpacity:.75},this.scene);t.skybox?.dispose(),t.ground.scaling=new g(5,5,5),t.ground.position.y=-1.1,t.ground.isPickable=!1,this.scene.createDefaultSkybox(e,!0);const n=await y.CreateAsync(this.scene,{floorMeshes:[t.ground],optionalFeatures:!0}),s=new b(new g,new g,3),o=new g(new g,new g,3),a=new g(new g,new g,3),i=new w(s);i.show(this.scene);const r=new w(o);r.show(this.scene);const l=new w(a);let c,d;l.show(this.scene),n.input.onControllerAddedObservable.add((e=>{e.onMotionControllerInitObservable.add((t=>{if("right"===t.handness){const n=t.getComponentIds(),i=t.getComponent(n[0]);i.onButtonStateChangedObservable.add((()=>{i.value>.5?(e.getWorldPointerRayToRef(s,!1),c=this.scene.pickWithRay(s),c&&void 0!==c.pickedMesh&&c.pickedMesh&&(d=c.pickedMesh,console.log("name:"+c.pickedMesh.name),d.setParent(t.rootMesh))):i.value<.5&&void 0!=d&&d.setParent(null)}));const r=t.getComponent(n[3]);r.onButtonStateChangedObservable.add((()=>{r.pressed&&(e.getWorldPointerRayToRef(o,!1),c=this.scene.pickWithRay(o),c&&c.pickedMesh&&c.pickedMesh&&(c.pickedMesh.scaling.x*=.9,c.pickedMesh.scaling.y*=.9,c.pickedMesh.scaling.z*=.9))}));const l=t.getComponent(n[4]);l.onButtonStateChangedObservable.add((()=>{l.pressed&&(e.getWorldPointerRayToRef(a,!1),c=this.scene.pickWithRay(a),c&&c.pickedMesh&&c.pickedMesh&&(c.pickedMesh.scaling.x*=1.1,c.pickedMesh.scaling.y*=1.1,c.pickedMesh.scaling.z*=1.1))}))}}))}))}}var x={name:"mainComp",mounted(){const e=document.querySelector("canvas");new _(e)}},M=n(3744);const S=(0,M.Z)(x,[["render",d],["__scopeId","data-v-4d3621ae"]]);var D=S;const O={class:"navbar navbar-expand-lg navbar-light bg-light fixed-top"},T=(0,o.uE)('<a class="navbar-brand" href="#">RealView</a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNav"><ul class="navbar-nav"><li class="nav-item active"><a class="nav-link" href="#">Home <span class="sr-only"></span></a></li><li class="nav-item"><a class="nav-link" href="#">Portfolio</a></li><div class="flex-grow"></div></ul><div><button class="btn btn-outline-success my-2 my-sm-0" style="color:#AE98BD;border-color:#AE98BD;">Login</button></div></div>',3),I=[T];function R(e,t){return(0,o.wg)(),(0,o.iD)("nav",O,I)}const F={},z=(0,M.Z)(F,[["render",R]]);var A=z,N=n(3577);const Z=e=>((0,o.dD)("data-v-407921dc"),e=e(),(0,o.Cn)(),e),B={class:"message-body"},j={class:"field"},E={class:"file is-boxed is-primary"},W={class:"file-label"},$=Z((()=>(0,o._)("span",{class:"file-cta"},[(0,o._)("span",{class:"file-icon"},[(0,o._)("i",{class:"fas fa-upload"})])],-1))),H=Z((()=>(0,o._)("hr",null,null,-1))),U={key:0,class:"error"},q={class:"posts-container"},G=["item","index","onDblclick"],L={class:"text"},Y=["onClick"],V=["onClick"];function X(e,t,n,a,i,r){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("form",{onSubmit:t[3]||(t[3]=(0,s.iM)(((...e)=>r.sendFile&&r.sendFile(...e)),["prevent"])),enctype:"multipart/form-data"},[i.message?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,N.C_)("message "+(i.error?"is-danger":"is-success"))},[(0,o._)("div",B,(0,N.zw)(i.message),1)],2)):(0,o.kq)("",!0),(0,o._)("div",j,[(0,o._)("div",E,[(0,o._)("label",W,[(0,o._)("input",{type:"file",ref:"file",onChange:t[0]||(t[0]=(...e)=>r.selectFile&&r.selectFile(...e)),class:"file-input"},null,544),$])])]),(0,o.wy)((0,o._)("input",{type:"text",id:"create-post","onUpdate:modelValue":t[1]||(t[1]=e=>i.text=e),placeholder:"create a post"},null,512),[[s.nr,i.text]]),(0,o._)("button",{class:"button is-info",onClick:t[2]||(t[2]=(...e)=>r.createPost&&r.createPost(...e))}," Send ")],32),H,i.error?((0,o.wg)(),(0,o.iD)("p",U,(0,N.zw)(i.error),1)):(0,o.kq)("",!0),(0,o._)("div",q,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.posts,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"post",item:e,index:t,key:e._id,onDblclick:t=>r.deletePost(e._id)},[(0,o._)("p",L,(0,N.zw)(e.text),1),(0,o._)("button",{class:"addButton",onClick:t=>r.addToScene2(e)},"Add To Scene",8,Y)],40,G)))),128))]),(0,o._)("ul",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.items,((e,t)=>((0,o.wg)(),(0,o.iD)("li",{key:t},[(0,o.Uk)((0,N.zw)(i.itemName)+(0,N.zw)(t+1)+" ",1),(0,o._)("button",{onClick:e=>r.addToScene(t)},"Add to Scene",8,V)])))),128))])],64)}n(7658);var K=n(3477);const J="api/posts/";class Q{static getPosts(){return new Promise((async(e,t)=>{try{const t=await K.Z.get(J),n=t.data;e(n.map((e=>({...e,createdAt:new Date(e.createdAt)}))))}catch(n){t(n)}}))}static insertPost(e){return K.Z.post(J,{text:e})}static deletePost(e){return K.Z["delete"](`${J}${e}`)}}var ee=Q,te=n(4690).n0n,ne={name:"SimpleUpload",data(){return{file:"",message:"",error:!1,itemName:"",items:[],posts:[],text:"",post_id:""}},async created(){try{this.posts=await ee.getPosts()}catch(e){this.error=e.message}},methods:{selectFile(){this.file=this.$refs.file.files[0],this.error=!1,this.message=""},async createPost(){const e=this.text;await ee.insertPost(e),this.posts=await ee.getPosts()},async deletePost(e){await ee.deletePost(e),this.posts=await ee.getPosts()},async sendFile(){const e=new FormData;e.append("file",this.file);try{await K.Z.post("/api/uploads",e),this.message="File has been uploaded",this.file="",this.error=!1}catch(t){console.log(t),this.message=t.response.data.error,this.error=!0}},addToScene(e){console.log(),te.ImportMesh("","https://realviewtest1.s3.eu-west-2.amazonaws.com/models/",`${e}.glb`,this.$parent.scene,(function(e){var t=e[0];console.log(t)}))},addToScene2(e){console.log(),te.ImportMesh("","https://realviewtest1.s3.eu-west-2.amazonaws.com/models/",`${e.post_id}.glb`,this.$parent.scene,(function(e){var t=e[0];console.log(t)}))},listItem(){this.items.push({name:this.itemName}),this.itemName=""},getItem(){const e=new XMLHttpRequest;e.open("GET","http://localhost:5001/api/uploads/item",!0),e.responseType="document",e.onload=function(){if(e.readyState===e.DONE&&200===e.status){const t=e.response;console.log(t)}},e.send()}}};const se=(0,M.Z)(ne,[["render",X],["__scopeId","data-v-407921dc"]]);var oe=se,ae={name:"App",components:{SimpleUpload:oe,MainComp:D,NavbarComponent:A}};const ie=(0,M.Z)(ae,[["render",a]]);var re=ie;n(3734);(0,s.ri)(re).mount("#app")}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,s,o,a){if(!s){var i=1/0;for(d=0;d<e.length;d++){s=e[d][0],o=e[d][1],a=e[d][2];for(var r=!0,l=0;l<s.length;l++)(!1&a||i>=a)&&Object.keys(n.O).every((function(e){return n.O[e](s[l])}))?s.splice(l--,1):(r=!1,a<i&&(i=a));if(r){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[s,o,a]}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,a,i=s[0],r=s[1],l=s[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(o in r)n.o(r,o)&&(n.m[o]=r[o]);if(l)var d=l(n)}for(t&&t(s);c<i.length;c++)a=i[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},s=self["webpackChunkclient"]=self["webpackChunkclient"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(3690)}));s=n.O(s)})();
//# sourceMappingURL=app.c4ab4e45.js.map